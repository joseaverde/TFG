with "config/seizure_detector_fixed_config.gpr";
abstract project Detector_Common is

   -->> Cross Compilation <<--

   Target_Name : Seizure_Detector_Fixed_Config.Target_Kind :=
      External ("SEIZURE_DETECTOR_TARGET",
                Seizure_Detector_Fixed_Config.Target);

   Target            := "";
   Runtime           := "";
   Compiler_Switches := ();

   Parallel_Suffix := "";
   case Seizure_Detector_Fixed_Config.Parallel is
      when "True"  => Parallel_Suffix := "__multi_threaded";
      when "False" => Parallel_Suffix := "__single_threaded";
   end case;

   case Target_Name is
      when "native" =>
         Target  := "";
         Runtime := "default";
         Compiler_Switches := ();
      when "esp32c3" =>
         Target := "riscv64-elf";
         Runtime := "light-rv32imac";
         Compiler_Switches := ("-march=rv32imc", "-mabi=ilp32");
      when "rpi4" =>
         Target := "arm-eabi";
         Runtime := "light-cortex-m7f";
         Compiler_Switches := ();
   end case;

   -->> Configuration <<--

   Suffix := Seizure_Detector_Fixed_Config.Build_Profile & "-" & Target_Name;

   package Compiler is
      for Default_Switches ("Ada") use
         Seizure_Detector_Fixed_Config.Ada_Compiler_Switches
         & Compiler_Switches;
   end Compiler;

   package Binder is
      for Switches ("Ada") use ("-Es");
   end Binder;

   package Install is
      for Artifacts (".") use ("share");
   end Install;

   package Builder is
      for Global_Configuration_Pragmas use "gnat.adc";
   end Builder;

end Detector_Common;
